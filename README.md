# Tagshot Backend

This is the backend for the TagShot App. The app allows users to tag their screenshots to keep them organized. With TagShot, users can take screenshots as they normally would, and then quickly add tags to those screenshots to make them easier to find and manage.

## Technology Stack

The backend is built using Python and the Flask web framework. It uses a PostgreSQL database to store data. Alembic is used for database migrations.

## File Structure

The file structure for the backend is as follows:

```
├── app/
│ ├── init.py
│ ├── models/
│ ├── routes/
│ └── settings/
├── config/
│ ├── init.py
│ ├── extensions.py
│ ├── commands.py
│ └── error.py
├── migrations/
├── tests/
├── manage.py
└── README.md
```

- The `app` folder contains the Flask application, with separate subfolders for models, routes, and settings.
- The `config` folder contains configuration files for Flask and other extensions used in the app.
- The `migrations` folder contains database migration scripts generated by Alembic.
- The `tests` folder contains test files for the application.
- The `manage.py` file contains command-line tools to manage the Flask application.

## Features

- Upload screenshots from your device
- Add tags to your screenshots for easy organization
- Browse through your tagged screenshots with a clean and intuitive interface
- Secure login system to protect your screenshots

## Technologies Used

- Python
- Flask
- Flask-RESTful
- Flask-SQLAlchemy

## Installation

1. Clone the repository
2. Install the necessary dependencies with `pip install -r requirements.txt`
3. Run the application with `python app.py`
4. Open your web browser and go to `http://localhost:5000`


## Endpoints

The following endpoints are available in the backend:

- `POST /users`: Create a new user.
- `GET /users/<user_id>`: Get a user by ID.
- `GET /users`: Get a list of all users.
- `POST /screenshots`: Upload a new screenshot with associated tags and metadata.
- `GET /screenshots`: Retrieve a list of all screenshots with associated tags and metadata.
- `GET /screenshots/<screenshot_id>` - Retrieve a specific screenshot with associated tags and metadata.
- `DELETE /screenshots/<screenshot_id>` - Delete a specific screenshot and associated metadata.
- `PUT /screenshots/<screenshot_id>/tags` : Update the tags for a specific screenshot.
- `GET /screenshots/tags` - Retrieve a list of all tags and the number of screenshots associated with each tag.
- `GET /screenshots/tags/<tag_name>/date/<date>`: Search and retrieve all screenshots that have a specific tag and a specific date. If any of the parameters are not provided, the endpoint could still function by omitting that specific filter.
- `GET /tags/<tag_id>`: Get a tag by ID.
- `GET /tags`: Get a list of all tags.

## Database Schema

Here is the database schema for the TagShot app:

`users`: A table for storing user information
- `id`: The user's ID (primary key)
- `username`: The user's username (unique)
- `password`: The user's password (hashed)
- `created_at`: The date and time the user was created

`screenshots`: A table for storing user screenshots
- `id`: The screenshot's ID (primary key)
- `user_id`: The user who took the screenshot (foreign key to users.id)
- `filepath`: The path to the screenshot file
- `created_at`: The date and time the screenshot was taken
- `tags`: A JSON object containing the tags for the screenshot

## How to Run

1. Install the required packages using `pipenv install`.
2. Set the environment variables:
   - `FLASK_APP`: The name of the Flask application (`app`).
   - `FLASK_ENV`: The environment mode (`development` or `production`).
   - `DATABASE_URL`: The URL for the PostgreSQL database.
3. Run the application using `flask run`.
4. Run the tests using `python -m pytest`.
5. Run the server with python app.py.

## Future Improvements

In the future, we plan to add the ability for users to select the number and time intervals for being prompted to tag their screenshots. We also plan to add push notifications to remind users to tag their screenshots.

## Contributing

Contributions are welcome! Feel free to open a pull request.

## License

This project is not licensed yet.
